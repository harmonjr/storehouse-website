---
interface Props {
  title: string;
  description: string;
  slug: string;
  publishDate: Date;
  category: string;
  featured?: boolean;
}

const { title, description, slug, publishDate, category, featured = false } = Astro.props;

const categoryColors: Record<string, { bg: string; text: string }> = {
  'margin-peace': { bg: 'bg-storehouse-100', text: 'text-storehouse-700' },
  'practical-money': { bg: 'bg-blue-100', text: 'text-blue-700' },
  'faith-stewardship': { bg: 'bg-purple-100', text: 'text-purple-700' },
  'variable-income': { bg: 'bg-cyan-100', text: 'text-cyan-700' },
  'stories': { bg: 'bg-amber-100', text: 'text-amber-700' },
};

const categoryLabels: Record<string, string> = {
  'margin-peace': 'Margin & Peace',
  'practical-money': 'Practical Money',
  'faith-stewardship': 'Faith & Stewardship',
  'variable-income': 'Variable Income',
  'stories': 'Stories',
};

const colors = categoryColors[category] || categoryColors['stories'];
const label = categoryLabels[category] || category;

const formattedDate = publishDate.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<article class="group bg-white rounded-2xl p-6 shadow-sm border border-slate-100 hover:shadow-md hover:border-slate-200 transition-all duration-200">
  <div class="flex flex-col h-full">
    <div class="mb-4">
      <span class:list={[
        'inline-block px-3 py-1 text-xs font-medium rounded-full',
        colors.bg,
        colors.text,
      ]}>
        {label}
      </span>
    </div>

    <h3 class="font-display text-xl font-semibold text-slate-900 mb-2 group-hover:text-storehouse-600 transition-colors">
      <a href={`/blog/${slug}`} class="hover:underline">
        {title}
      </a>
    </h3>

    <p class="text-slate-600 mb-4 flex-1">
      {description}
    </p>

    <div class="flex items-center justify-between mt-auto pt-4 border-t border-slate-100">
      <time class="text-sm text-slate-500" datetime={publishDate.toISOString()}>
        {formattedDate}
      </time>
      <a
        href={`/blog/${slug}`}
        class="text-sm font-medium text-storehouse-600 hover:text-storehouse-700 transition-colors"
      >
        Read more &rarr;
      </a>
    </div>
  </div>
</article>
